<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rialo — Jumping Game</title>
  <style>
    :root{--bg:#0b1220;--card:#0f1724;--accent:#ffd166;--muted:#9aa6b2}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{background:linear-gradient(180deg,#071029 0%, #08111b 60%);display:flex;align-items:center;justify-content:center;color:white}
    .wrapper{width:520px;max-width:95%;padding:18px;background:rgba(255,255,255,0.02);border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:18px;margin:0}
    .meta{font-size:12px;color:var(--muted)}
    canvas{display:block;background:linear-gradient(180deg,#071026 0%, #012 100%);border-radius:8px;width:100%;height:640px;}
    .controls{display:flex;gap:8px;margin-top:10px;align-items:center}
    .btn{background:var(--accent);color:#08111b;padding:8px 10px;border-radius:8px;font-weight:600;cursor:pointer;border:none}
    .muted{color:var(--muted);font-size:13px}
    .footer{margin-top:8px;font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <div>
        <h1>Rialo — Jumping Game</h1>
        <div class="meta">Rialo Team Edition • Keyboard & touch • Score + Stars</div>
      </div>
      <div class="meta">Team review ready</div>
    </header>

    <canvas id="game" width="480" height="640"></canvas>

    <div class="controls">
      <button id="startBtn" class="btn">Start / Restart</button>
      <div class="muted">Use Space / ↑ to jump — ← → to move. Tap to jump on mobile.</div>
    </div>

    <div class="footer">To push to GitHub: create repo <code>rialo</code>, add these files, and enable pages. Ask me and I can produce a ZIP or git commands.</div>
  </div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width; const H = canvas.height;
let keys = {}, touchX = null;
let state = 'menu';
let player, platforms, stars, score, speedMultiplier, frame;

function reset(){
  player = {x: W/2-16, y: H-80, w: 32, h: 32, vy: 0, grounded: false};
  platforms = [];
  stars = [];
  score = 0;
  speedMultiplier = 1;
  frame = 0;
  let y = H-40;
  while(y > -H){
    platforms.push({x: randRange(40, W-120), y: y, w: randRange(80, 140), h: 12});
    if(Math.random() < 0.3) stars.push({x: platforms[platforms.length-1].x + platforms[platforms.length-1].w/2 - 8, y: platforms[platforms.length-1].y - 20, r: 8, collected:false});
    y -= randRange(80, 140);
  }
}

function randRange(a,b){return Math.floor(Math.random()*(b-a))+a}

function update(dt){
  frame++;
  if(keys['ArrowLeft']||keys['a']) player.x -= 200*dt;
  if(keys['ArrowRight']||keys['d']) player.x += 200*dt;
  if(player.x < -player.w) player.x = W;
  if(player.x > W) player.x = -player.w;
  player.vy += 900*dt;
  player.y += player.vy*dt;
  player.grounded = false;
  for(let p of platforms){
    if(player.vy > 0 && player.x + player.w > p.x && player.x < p.x + p.w && player.y + player.h > p.y && player.y + player.h < p.y + p.h + 30){
      player.y = p.y - player.h; player.vy = 0; player.grounded = true;
    }
  }
  if(player.y < H*0.45){
    const dy = Math.max(0, (H*0.45 - player.y));
    player.y += dy;
    for(let p of platforms) p.y += dy * 0.6 * speedMultiplier;
    for(let s of stars) s.y += dy * 0.6 * speedMultiplier;
    score += Math.floor(dy*0.1);
  }
  platforms = platforms.filter(p => p.y < H+40);
  stars = stars.filter(s => s.y < H+40 && !s.collected);
  while(platforms.length < 8){
    const lastY = platforms.length? Math.min(...platforms.map(p=>p.y)) : -40;
    const newY = lastY - randRange(80,140);
    const newP = {x: randRange(30,W-140), y: newY, w: randRange(80,140), h: 12};
    platforms.push(newP);
    if(Math.random() < 0.4) stars.push({x: newP.x + randRange(16,newP.w-24), y: newP.y - 20, r: 8, collected:false});
  }
  for(let s of stars){
    if(!s.collected && player.x + player.w > s.x && player.x < s.x + s.r*2 && player.y + player.h > s.y && player.y < s.y + s.r*2){
      s.collected = true; score += 50;
    }
  }
  if(player.y > H+60){ state = 'gameover'; }
  if(frame % 600 === 0) speedMultiplier += 0.04;
}

function draw(){
  ctx.clearRect(0,0,W,H);
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0,'#041227'); g.addColorStop(1,'#051426');
  ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
  for(let p of platforms){ roundRect(ctx, p.x, p.y, p.w, p.h, 6, '#18324b', '#0ea5a0'); }
  for(let s of stars){ if(!s.collected) drawStar(ctx, s.x+s.r, s.y+s.r, s.r, 5); }
  roundRect(ctx, player.x, player.y, player.w, player.h, 6, '#ffd166', '#ff8c42');
  ctx.fillStyle = 'rgba(255,255,255,0.9)'; ctx.font = '18px system-ui'; ctx.fillText('Rialo Score: '+score, 12, 26);
  ctx.font = '12px system-ui'; ctx.fillStyle='rgba(255,255,255,0.6)'; ctx.fillText('Rialo Stars: '+stars.filter(s=>s.collected).length, 12, 44);
  if(state === 'menu'){
    ctx.fillStyle = 'rgba(0,0,0,0.45)'; ctx.fillRect(W/2-140, H/2-70, 280, 140);
    ctx.fillStyle = '#fff'; ctx.font = '20px system-ui'; ctx.fillText('Rialo — Jumping Game', W/2-120, H/2-30);
    ctx.font='14px system-ui'; ctx.fillText('Press Space / Tap to start jumping', W/2-100, H/2+4);
  }
  if(state === 'gameover'){
    ctx.fillStyle = 'rgba(0,0,0,0.5)'; ctx.fillRect(W/2-160, H/2-80, 320, 160);
    ctx.fillStyle = '#fff'; ctx.font='26px system-ui'; ctx.fillText('Rialo Game Over', W/2-100, H/2-20);
    ctx.font='16px system-ui'; ctx.fillText('Final score: '+score, W/2-70, H/2+8);
    ctx.font='14px system-ui'; ctx.fillText('Click START to play Rialo again', W/2-100, H/2+36);
  }
}

function roundRect(ctx,x,y,w,h,r, fill, stroke){ ctx.beginPath(); ctx.moveTo(x+r,y); ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath(); if(fill){ ctx.fillStyle = fill; ctx.fill(); } if(stroke){ ctx.strokeStyle = stroke; ctx.stroke(); } }

function drawStar(ctx, cx, cy, r, spikes){
  ctx.save(); ctx.translate(cx,cy); ctx.beginPath();
  for(let i=0;i<spikes;i++){
    ctx.lineTo(0, -r);
    ctx.rotate(Math.PI/spikes);
    ctx.lineTo(0, -r/2);
    ctx.rotate(Math.PI/spikes);
  }
  ctx.closePath(); ctx.fillStyle = '#ffe66d'; ctx.fill(); ctx.restore();
}

function doJump(){
  if(state === 'menu'){ state = 'playing'; }
  if(state === 'gameover'){ reset(); state='playing'; }
  if(player.grounded || player.vy > -200){ player.vy = -420; player.grounded = false; }
}

let last = performance.now();
function loop(now){
  const dt = Math.min(1/30, (now-last)/1000);
  last = now;
  if(state === 'playing') update(dt);
  draw();
  requestAnimationFrame(loop);
}

window.addEventListener('keydown', e => { keys[e.key]=true; if(e.key===' '|| e.key==='ArrowUp') { e.preventDefault(); doJump(); } });
window.addEventListener('keyup', e => { keys[e.key]=false; });
canvas.addEventListener('click', e => { doJump(); });
canvas.addEventListener('touchstart', e => { e.preventDefault(); doJump(); const t = e.touches[0]; touchX = t.clientX; }, {passive:false});
canvas.addEventListener('touchmove', e => { const t = e.touches[0]; touchX = t.clientX; });
canvas.addEventListener('touchend', e => { touchX = null; });

document.getElementById('startBtn').addEventListener('click', ()=>{ if(state==='menu' || state==='gameover') { reset(); state='playing'; } });

reset(); state='menu'; requestAnimationFrame(loop);
</script>
</body>
</html>
